<!DOCTYPE html>
<html>
<head>
  <title>bzhome</title>
  <link rel="stylesheet" href="lib/normalize.css">
  <link rel="stylesheet" href="lib/jquery.ui.autocomplete.css" type="text/css">
  <link rel="stylesheet/less" href="index.less" type="text/css">

  <script src="lib/less-1.1.3.min.js" type="text/javascript"></script>
  <script src="lib/jquery-1.6.4.min.js" type="text/javascript"></script>
  <script src="lib/jquery.timeago.js" type="text/javascript"></script>
  <script src="lib/jquery.ui.autocomplete.js"></script>
  <script src="lib/bz-0.2.2.js" type="text/javascript"></script>
  <script src="lib/handlebars.js" type="text/javascript"></script>
  <script src="lib/ba-linkify.min.js"></script>
  <script src="lib/underscore-min.js"></script>
  <script src="lib/async.min.js"></script>

  <script src="user.js"></script>
  <script src="handlers.js"></script>
  <script src="bzhome.js"></script>
  <script src="utils.js"></script>
  
  <script id="timeline-bug" type="text/html">
    <div class="bug-{{bug.id}} timeline-item">
      <div class="timeline-bug bug">
        <a href="{{show_bug bug.id}}" class="bug-title" title="{{> bug_tooltip}}">
          <img id="bug-icon" hidden=true src="lib/bugzilla.png"/>
          <span class="bug-id">{{bug.id}}</span>
          <span class="bug-summary">{{bug.summary}}</span>
        </a>
      </div>
    </div>
  </script>
  
  <script id="bug-events">
    <div class="timeline-events">
      {{#format_events}}
      {{#each events}}
        <div class="event">
        {{#if comment}}
           <div class="comment-item">
           <span class="bullet">&middot;</span>
           {{#format_comment comment}}
             <span class="commenter name"></span>
             <p class="comment" title="{{fullText}}">{{{linkify text}}}</p>
             {{#if replyTo}}
               <span class="reply-to">in reply to
                 <span class="name">{{replyTo.name}}</span> from
                 <a href={{show_comment ../../../../bug.id replyTo.id}}>
                   c{{replyTo.id}}
                 </a>
               </span>
             {{/if}}
             {{#if created}}
               <span class="comment-on">Created 
                 <a href={{show_attach created.id diff}}>
                   attachment {{created.id}} - {{created.title}}
                 </a>
               </span>
             {{/if}}
             {{#if reviewOf}}
               <span class="review-of">review of
                 <a href={{show_attach reviewOf}}>
                   attachment {{reviewOf}}
                 </a>
               </span>
             {{/if}}
             {{#if commentOn}}
               <span class="comment-on">on 
                 <a href={{show_attach commentOn.id}}>
                   attachment {{commentOn.id}} - {{commentOn.title}}
                 </a>
               </span>
             {{/if}}
             <div class="comment-suffix">
               {{format_name creator.real_name}}
               <span class="timeago suffix-time" title="{{creation_time}}"></span>
             </div>
           {{/format_comment}}
           </div>
        {{/if}}
        {{#if changeset}}
          <div class="changeset-item">
          {{#with changeset}}
          <span class="changeset-suffix">
            {{changer.name}} 
            <span class="suffix-time timeago" title="{{change_time}}"></span>
          </span>
          {{#format_changes}}
          {{#each changes}}
            {{#format_change}}
            <div class="change">
            <span class="bullet">&middot;</span>
              <span class="field">{{field field_name}}</span>
              {{#if changed}} 
                 <span class="removed">
                   {{removed}} &rarr;
                 </span>
                 <span class="added">
                   {{added}}
                 </span>
              {{else}}
                {{#if removed}}
                  <span class="removed">
                  removed
                  {{#if_bugid field_name}}
                    <a href={{show_bug removed}}>bug {{removed}}</a>
                  {{else}}
                    {{removed}}
                  {{/if_bugid}}
                  </span>
                {{/if}}
                {{#if added}}
                  <span class="added">
                  added
                  {{#if_bugid field_name}}
                    <a href={{show_bug added}}>bug {{added}}</a>
                  {{else}}
                    {{added}}
                  {{/if_bugid}}
                  </span>
                {{/if}}
              {{/if}}
            {{#if attachment_id}}
              on <a href={{show_attach attachment_id diff}}>attachment {{attachment_id diff}}</a>
            {{/if}}
            </div>
            {{/format_change}}
          {{/each}}
          {{/format_changes}}
          {{/with}}
          </div>
        {{/if}}
        </div>
      {{/each}}
      {{/format_events}}
    </div>
  </script>
  
  <script id="review-item" type="text/html">
    <div class="review-item">
      <div class="review-attachment">
        <a class="review-link" href={{show_attach attachment.id "edit"}}>{{attachment.description}}</a>
      </div>
      <div class="suffix">
        by {{flag.setter.name}}
        on <a href={{show_bug bug.id}} title="{{> bug_tooltip}}">bug {{bug.id}}</a>
        <span class="timeago" title="{{attachment.last_change_time}}"></span>
      </div>
    </div>
  </script>

</head>
<body>
 <div id="container">
   <div id="main">
     <div id="header">
       <span id="title">bzhome</span>
         <span id="login"> for
            <form id="login-form">
              <input id="login-name" placeholder="Enter email..."/>
            </form>
         </span>
       </span>
     </div>
     <div id="content">
       <section id="timeline">
         <div class="header">Recently Updated Bugs
           <div id="type-selector">
             <select id="timeline-type">
               <option value="cced">CCed</option>
               <option value="assigned">Assigned</option>
               <optgroup label="components" id="component-types">
                 <option id="add-comp" value="add">add a component...</option>
               </optgroup>
               <option value="all">All</option>
             </select>
             <form id="add-comp-form">
               <input id="new-component" class="component-search"></input>
               <input class="submit" type="submit" value="Add"></input>
             </form>
           </div>
         </div>
         <div class="content">
            <div id="cced" class="type-section">
       
            </div>
            <div id="assigned" class="type-section">
              
            </div>
            <div id="all" class="type-section">
              
            </div>
         </div>       
       </section>

       <div id="side">
       <section id="file-bug" class="components">
         <div class="header">
           <span class="component-label">File Bug</span>
           <form id="file-form">
             <input class="component-search" placeholder="in Component..."></input>
             <input class="submit" type="submit" value="Go"></input>
           </form>
         </div>
       </section>

       <section id="search-bugs" class="components">
         <div class="header">
           <span class="component-label">Search</span>
           <form id="search-form">
             <input class="component-search" placeholder="in Component..."></input>
             <input class="submit" type="submit" value="Go"></input>
           </form>
         </div>
       </section>

       <section id="reviews">
         <div class="header">Reviews <span class="count"></span></div>
         <div class="content">
          
         </div>
       </section>
       </div>
     </div>
   </div>
  </div>
</body>
</html>
